{"version":3,"sources":["utils/realURLsAPI.js","utils/browserOS.js","DouyuStream.js","App.js","index.js"],"names":["api","process","REACT_APP_CONTACTS_API_URL","token","localStorage","Math","random","toString","substr","CROSheadersGET","method","mode","headers","queryDouyuRoom","roomNo","fetch","then","res","json","data","stream","queryBilibiliRoom","ua","navigator","userAgent","toLowerCase","check","r","test","isOpera","document","compatMode","isChrome","isWebKit","isSafari","isIE","isMac","DADI_LION","DouyuStream","state","OS","updateSearch","query","setState","trim","clearSearch","oriURL","queryDouyuPy","realURLsAPI","queryBilibiliPy","handleEnterKey","e","nativeEvent","keyCode","this","playerURL","browserOS","className","onKeyDown","type","placeholder","value","onChange","event","target","onClick","href","Component","App","contacts","removeContact","contact","path","exact","render","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.f4ab96db.chunk.js","sourcesContent":["const api = process.env.REACT_APP_CONTACTS_API_URL || 'http://back.npsex.com'\n\nlet token = localStorage.token\n\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\nconst CROSheadersGET = {\n    method: 'GET',\n    mode: 'no-cors',\n    headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n    },\n};\nconst CROSheadersPOST = {\n    method: 'POST',\n    mode: 'cors',\n    credentials: 'include',\n    headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    // body: JSON.stringify(postData)\n};\n\nexport const queryDouyuRoom = (roomNo) =>\n    fetch(`${api}/douyu?roomNo=${roomNo}`, { CROSheadersGET })\n        .then(res => res.json())\n        .then(data => data.stream)\n\nexport const queryBilibiliRoom = (roomNo) =>\n    fetch(`${api}/bilibili?roomNo=${roomNo}`, { CROSheadersGET })\n        .then(res => res.json())\n        .then(data => data.stream)\n\nexport const getAll = () =>\n  fetch(`${api}/contacts`, { headers })\n    .then(res => res.json())\n    .then(data => data.contacts)\n\nexport const remove = (contact) =>\n  fetch(`${api}/contacts/${contact.id}`, { method: 'DELETE', headers })\n    .then(res => res.json())\n    .then(data => data.contacts)\n\nexport const create = (body) =>\n  fetch(`${api}/contacts`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  }).then(res => res.json())\n","//http://caibaojian.com/js-browser.html\n// ios android https://blog.csdn.net/LonewoIf/article/details/88995150\n\nexport const ua = navigator.userAgent.toLowerCase();\nconst check = function(r){\n        return r.test(ua);\n    }\nexport const isStrict = document.compatMode == \"CSS1Compat\";\nexport const isOpera = check(/opera/);\nexport const isChrome = check(/chrome/);\nexport const isWebKit = check(/webkit/);\nexport const isSafari = !isChrome && check(/safari/);\nexport const isSafari3 = isSafari && check(/version3/);\nexport const isSafari4 = isSafari && check(/version4/);\nexport const isIE = !isOpera && check(/msie/);\nexport const isIE7 = isIE && check(/msie 7/);\nexport const isIE8 = isIE && check(/msie 8/);\nexport const isGecko = !isWebKit && check(/gecko/);\nexport const isGecko3 = isGecko && check(/rv:1.9/);\nexport const isBorderBox = isIE && !isStrict;\nexport const isWindows = () => {\n    return check(/windows|win32/);\n};\nexport const isMac = () => check(/macintosh|mac os x/);\n\nexport const  isAir = check(/adobeair/);\nexport const isLinux = check(/linux/);\n\n// return {\n//     browser: isChrome ? 'chrome' : '',\n//     os: (isWindows ? 'windows' : (isMac ? 'mac' : ''))\n// };\n\n","import React, {Component} from 'react';\nimport {Link, Redirect} from 'react-router-dom';\nimport PropTypes from 'prop-types'\nimport escapeRegExp from 'escape-string-regexp'\nimport * as realURLsAPI from './utils/realURLsAPI'\nimport * as browserOS from './utils/browserOS'\n// import sortBy from 'sort-by'\n\nconst DADI_LION = 'http://dyscdnali1.douyucdn.cn/live/122024r69JkBOUVs.flv';\n\nclass DouyuStream extends Component{\n\n    state = {\n        OS:'windows',\n        roomNo : '122024',\n        stream: ''\n    }\n\n    updateSearch = (query) => {\n        this.setState({roomNo: query.trim()})\n    }\n\n    clearSearch = () => {\n        this.setState({roomNo: ''})\n    }\n\n    trim = (oriURL) => oriURL\n    queryDouyuPy = (roomNo) => {\n        realURLsAPI.queryDouyuRoom(roomNo)\n            .then((stream) => {\n               // this.trim(stream)\n                this.setState({stream})\n            })\n    }\n    queryBilibiliPy = (roomNo) => {\n        realURLsAPI.queryBilibiliRoom(roomNo)\n            .then((stream) => {\n                // this.trim(stream)\n                this.setState({stream})\n            })\n    }\n\n    handleEnterKey = (e) => {\n        if(e.nativeEvent.keyCode === 13){ //e.nativeEvent获取原生的事件对像\n            this.queryDouyuPy(this.state.roomNo)\n        }\n    }\n\n    render() {\n\n        const {OS, roomNo, stream} = this.state;\n\n        const DADIplayerURL = browserOS.isMac() ? `iina://open?url=${DADI_LION}` : `potplayer://${DADI_LION}`;\n        const playerURL = browserOS.isMac() ? `iina://open?url=${stream}` : `potplayer://${stream}`;\n\n        return (\n            <div className='list-platforms'>\n                <div onKeyDown={(e) => this.handleEnterKey(e)}>\n                    <input\n                        className='search-room'\n                        type='text'\n                        placeholder='输入房间号'\n                        value={roomNo}\n                        onChange={(event) => this.updateSearch(event.target.value)}\n                    />\n\n                    <button onClick={() => this.queryDouyuPy(roomNo)}>\n                        douyu直播源生成\n                    </button>\n\n                    <a\n                        className=\"add-contact\"\n                        href={playerURL}\n                        target=\"_blank\"\n                    >\n                        打开房间直播源{stream}\n                        {/*复制*/}\n                    </a>\n                    <br/>\n                    手机版开发中\n                    {/*OS === 'android'?*/}\n                    {/*<Link onClick={}>*/}\n                        {/*点击复制{playerURL}*/}\n                    {/*</Link>*/}\n                    {/*: <br/>*/}\n                    {/*<a*/}\n                        {/*className=\"add-contact\"*/}\n                        {/*href={DADIplayerURL}*/}\n                        {/*target=\"_blank\"*/}\n                    {/*>*/}\n                        {/*大帝直播流*/}\n                    {/*</a>*/}\n                </div>\n                <br/>\n                <div onKeyDown={(e) => this.handleEnterKey(e)}>\n                    <input\n                        className='search-room'\n                        type='text'\n                        placeholder='输入房间号'\n                        value={roomNo}\n                        onChange={(event) => this.updateSearch(event.target.value)}\n                    />\n\n                    <button onClick={() => this.queryBilibiliPy(roomNo)}>\n                        B站直播源生成\n                    </button>\n\n                    <a\n                        className=\"add-contact\"\n                        href={playerURL}\n                        target=\"_blank\"\n                    >\n                        打开房间直播源{stream}\n                        {/*复制*/}\n                    </a>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DouyuStream","import React, {Component} from 'react';\nimport {Router, Route} from 'react-router-dom'\nimport DouyuStream from './DouyuStream'\n// import CreateContact from './CreateContact';\n// import * as ContactsAPI from './utils/ContactsAPI'\n\n\nclass App extends Component {\n    state = {\n        //从服务器获取 联系人 方法：ContactsAPI.getAll 见 ContactsAPI组件\n        contacts: []\n    }\n\n    //react内置生命周期组件 组件挂载时 详见：react组件生命周期图\n    componentDidMount() {\n        // ContactsAPI.getAll().then((contacts) => {\n        //     this.setState({contacts: contacts})\n        // })\n    }\n\n    removeContact = (contact) => {\n        // this.setState((prevState) => ({\n        //         contacts: prevState.contacts.filter((c) => c.id !== contact.id)\n        //     })\n        // )\n        //\n        // ContactsAPI.remove(contact);\n    }\n\n    createContact(contact) {\n        // ContactsAPI.create(contact).then(contact => {\n        //     this.setState(prevState => {\n        //         //concat 用于连接数组（在数组后添加对应的contact对象)\n        //         contacts : prevState.contacts.concat([contact])\n        //     })\n        // })\n    }\n\n    render() {\n        return (\n            <div>\n              <Route path=\"/\" exact render= {()=> (\n                  <DouyuStream\n                      // onDeleteContact={this.removeContact}\n                      // contacts={this.state.contacts}\n                  />\n              )}/>\n\n\n              {/*<Route path=\"/create\" render={ ({history}) =>(*/}\n\n                  {/*<CreateContact*/}\n                      {/*onCreateContact = {(contact) => {*/}\n                          {/*this.createContact(contact)*/}\n                          {/*//history 是router中的url变量*/}\n                          {/*history.push('/')*/}\n                      {/*}}/>*/}\n              {/*)}/>*/}\n\n              <Route exact path=\"/test\" />\n            </div>\n        )\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n//引入react路由器组件 BrowserRouter\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}