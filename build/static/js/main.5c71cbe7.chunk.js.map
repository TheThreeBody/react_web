{"version":3,"sources":["utils/realURLsAPI.js","utils/browserOS.js","DouyuStream.js","Sukiya.js","App.js","index.js"],"names":["api","process","REACT_APP_CONTACTS_API_URL","token","localStorage","Math","random","toString","substr","CROSheadersGET","method","mode","headers","queryDouyuRoom","roomNo","fetch","then","res","json","data","stream","queryBilibiliRoom","querySukiya","query","ua","navigator","userAgent","toLowerCase","check","r","test","isOpera","document","compatMode","isChrome","isWebKit","isSafari","isIE","isMac","DADI_LION","DouyuStream","state","OS","douyuStream","bilibiliStream","updateSearch","setState","trim","clearSearch","oriURL","queryDouyuPy","realURLsAPI","flv","queryBilibiliPy","handleQuery","handleEnterKey","e","nativeEvent","keyCode","this","douyuURL","browserOS","bilibiliURL","className","onKeyDown","type","placeholder","value","onChange","event","target","onClick","href","Component","Sukiya","decodeStr","encodeStr","discountNo","updateQuery","encodeURIComponent","App","contacts","removeContact","contact","path","exact","render","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.5c71cbe7.chunk.js","sourcesContent":["const api = process.env.REACT_APP_CONTACTS_API_URL || 'http://back.npsex.com'\n\nlet token = localStorage.token\n\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\nconst CROSheadersGET = {\n    method: 'GET',\n    mode: 'no-cors',\n    headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n    },\n};\nconst CROSheadersPOST = {\n    method: 'POST',\n    mode: 'cors',\n    credentials: 'include',\n    headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    // body: JSON.stringify(postData)\n};\n\nexport const queryDouyuRoom = (roomNo) =>\n    fetch(`${api}/douyu?roomNo=${roomNo}`, { CROSheadersGET })\n        .then(res => res.json())\n        .then(data => data.stream)\n        // .catch(err => console.log(err))\n\nexport const queryBilibiliRoom = (roomNo) =>\n    fetch(`${api}/bilibili?roomNo=${roomNo}`, { CROSheadersGET })\n        .then(res => res.json())\n        .then(data => data.stream)\n        // .catch(err => console.log(err))\n\nexport const querySukiya = (query) =>\n    fetch(`${api}/sukiya?link=${query}`, {\n        CROSheadersGET,\n        // body: JSON.stringify(query)\n    })\n        .then(res => res.json())\n        .then(data => data)\n\nexport const getAll = () =>\n  fetch(`${api}/contacts`, { headers })\n    .then(res => res.json())\n    .then(data => data.contacts)\n\nexport const remove = (contact) =>\n  fetch(`${api}/contacts/${contact.id}`, { method: 'DELETE', headers })\n    .then(res => res.json())\n    .then(data => data.contacts)\n\nexport const create = (body) =>\n  fetch(`${api}/contacts`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  }).then(res => res.json())\n","//http://caibaojian.com/js-browser.html\n// ios android https://blog.csdn.net/LonewoIf/article/details/88995150\n\nexport const ua = navigator.userAgent.toLowerCase();\nconst check = function(r){\n        return r.test(ua);\n    }\nexport const isStrict = document.compatMode == \"CSS1Compat\";\nexport const isOpera = check(/opera/);\nexport const isChrome = check(/chrome/);\nexport const isWebKit = check(/webkit/);\nexport const isSafari = !isChrome && check(/safari/);\nexport const isSafari3 = isSafari && check(/version3/);\nexport const isSafari4 = isSafari && check(/version4/);\nexport const isIE = !isOpera && check(/msie/);\nexport const isIE7 = isIE && check(/msie 7/);\nexport const isIE8 = isIE && check(/msie 8/);\nexport const isGecko = !isWebKit && check(/gecko/);\nexport const isGecko3 = isGecko && check(/rv:1.9/);\nexport const isBorderBox = isIE && !isStrict;\nexport const isWindows = () => {\n    return check(/windows|win32/);\n};\nexport const isMac = () => check(/macintosh|mac os x/);\n\nexport const  isAir = check(/adobeair/);\nexport const isLinux = check(/linux/);\n\n// return {\n//     browser: isChrome ? 'chrome' : '',\n//     os: (isWindows ? 'windows' : (isMac ? 'mac' : ''))\n// };\n\n","import React, {Component} from 'react';\nimport {Link, Redirect} from 'react-router-dom';\nimport PropTypes from 'prop-types'\nimport escapeRegExp from 'escape-string-regexp'\nimport * as realURLsAPI from './utils/realURLsAPI'\nimport * as browserOS from './utils/browserOS'\n// import sortBy from 'sort-by'\n\nconst DADI_LION = 'http://dyscdnali1.douyucdn.cn/live/122024r69JkBOUVs.flv';\n\nclass DouyuStream extends Component{\n\n    state = {\n        OS:'windows',\n        roomNo : '122024',\n        douyuStream: '',\n        bilibiliStream:''\n    }\n\n    updateSearch = (query) => {\n        this.setState({roomNo: query.trim()})\n    }\n\n    clearSearch = () => {\n        this.setState({roomNo: ''})\n    }\n\n    trim = (oriURL) => oriURL;\n\n    queryDouyuPy = (roomNo) => {\n        realURLsAPI.queryDouyuRoom(roomNo)\n            .then((stream) => {\n               // this.trim(stream)\n                this.setState({douyuStream: stream.flv})\n            })\n    }\n    queryBilibiliPy = (roomNo) => {\n        realURLsAPI.queryBilibiliRoom(roomNo)\n            .then((stream) => {\n                // this.trim(stream)\n                this.setState({bilibiliStream: stream})\n            })\n    }\n\n    handleQuery = (roomNo) => {\n        this.queryDouyuPy(roomNo);\n        this.queryBilibiliPy(roomNo);\n    }\n\n    handleEnterKey = (e) => {\n        if(e.nativeEvent.keyCode === 13){ //e.nativeEvent获取原生的事件对像\n            this.handleQuery(this.state.roomNo)\n        }\n    }\n\n    render() {\n\n        const {OS, roomNo, douyuStream,bilibiliStream} = this.state;\n\n        const DADIplayerURL = browserOS.isMac() ? `iina://open?url=${DADI_LION}` : `potplayer://${DADI_LION}`;\n        const douyuURL = browserOS.isMac() ? `iina://open?url=${douyuStream}` : `potplayer://${douyuStream}`;\n        const bilibiliURL = browserOS.isMac() ? `iina://open?url=${bilibiliStream}` : `potplayer://${bilibiliStream}`;\n\n        return (\n            <div className='list-platforms'>\n                <div onKeyDown={(e) => this.handleEnterKey(e)}>\n                    <input\n                        className='search-room'\n                        type='text'\n                        placeholder='输入房间号'\n                        value={roomNo}\n                        onChange={(event) => this.updateSearch(event.target.value)}\n                    />\n\n                    <button onClick={() => this.queryDouyuPy(roomNo)}>\n                        douyu直播源生成\n                    </button>\n                    <br/>\n                    <p>\n                        斗鱼Link:\n                    </p>\n                    <a\n                        className=\"add-contact\"\n                        href={douyuURL}\n                        target=\"_blank\"\n                    >\n                        打开房间直播源{douyuStream}\n                        {/*复制*/}\n                    </a>\n                    <br/>\n                    手机版开发中\n                    {/*OS === 'android'?*/}\n                    {/*<Link onClick={}>*/}\n                        {/*点击复制{douyuURL}*/}\n                    {/*</Link>*/}\n                    {/*: <br/>*/}\n                    {/*<a*/}\n                        {/*className=\"add-contact\"*/}\n                        {/*href={DADIplayerURL}*/}\n                        {/*target=\"_blank\"*/}\n                    {/*>*/}\n                        {/*大帝直播流*/}\n                    {/*</a>*/}\n                </div>\n                <br/>\n                <div onKeyDown={(e) => this.handleEnterKey(e)}>\n                    <input\n                        className='search-room'\n                        type='text'\n                        placeholder='输入房间号'\n                        value={roomNo}\n                        onChange={(event) => this.updateSearch(event.target.value)}\n                    />\n\n                    <button onClick={() => this.queryBilibiliPy(roomNo)}>\n                        B站直播源生成\n                    </button>\n                    <p>\n                        B站Link:\n                    </p>\n                    <a\n                        className=\"add-contact\"\n                        href={bilibiliURL}\n                        target=\"_blank\"\n                    >\n                        打开房间直播源{bilibiliURL}\n                        {/*复制*/}\n                    </a>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DouyuStream","import React, {Component} from 'react';\nimport * as realURLsAPI from './utils/realURLsAPI'\n\nclass Sukiya extends Component{\n\n    state = {\n        decodeStr:'http://cn-sukiya.csfeedback.net/sv/cn/RCN1209202100012099528818',\n        encodeStr:'http%3A%2F%2Fcn-sukiya.csfeedback.net%2Fsv%2Fcn%2FRCN1209202100012099528818',\n        discountNo:''\n    }\n\n    updateQuery = (query) => {\n        //https://segmentfault.com/a/1190000013236956 decodeURIComponent（）解码\n        this.setState({decodeStr: query.trim()},\n            () => this.setState({encodeStr:encodeURIComponent(query)}))\n    }\n\n    handleQuery = (query) =>{\n        realURLsAPI.querySukiya(query)\n            .then((data) => {\n                this.setState({discountNo: data.discountNo})\n            })\n    }\n\n    handleEnterKey = (e) => {\n        if(e.nativeEvent.keyCode === 13){ //e.nativeEvent获取原生的事件对像\n            this.handleQuery(this.state.encodeStr)\n        }\n    }\n\n    render() {\n        const {decodeStr,encodeStr, discountNo} = this.state;\n\n        return (\n            <div className='list-platforms'>\n                <input\n                    className='query-link'\n                    type='text'\n                    placeholder='输入食其家网址 例:http://cn-sukiya.csfeedback.net/sv/cn/RCN1109212000012010326913'\n                    value={decodeStr}\n                    onChange={(event) => this.updateQuery(event.target.value)}\n                    onKeyDown={(e) => this.handleEnterKey(e)}\n                />\n                <button onClick={() => this.handleQuery(encodeStr)}>\n                    sukiya生成\n                </button>\n                <br/>\n                <p>\n                    食其家discountNo：{discountNo}\n                    <br/>\n                    encodeStr:<br/>{encodeStr}\n                    <br/>\n                    decodeStr:<br/>{decodeStr}\n                </p>\n\n            </div>\n        )\n    }\n}\n\nexport default Sukiya","import React, {Component} from 'react';\nimport {Router, Route, Switch} from 'react-router-dom'\nimport DouyuStream from './DouyuStream'\nimport Sukiya from './Sukiya'\n// import CreateContact from './CreateContact';\n// import * as ContactsAPI from './utils/ContactsAPI'\n\n\nclass App extends Component {\n    state = {\n        //从服务器获取 联系人 方法：ContactsAPI.getAll 见 ContactsAPI组件\n        contacts: []\n    }\n\n    //react内置生命周期组件 组件挂载时 详见：react组件生命周期图\n    componentDidMount() {\n        // ContactsAPI.getAll().then((contacts) => {\n        //     this.setState({contacts: contacts})\n        // })\n    }\n\n    removeContact = (contact) => {\n        // this.setState((prevState) => ({\n        //         contacts: prevState.contacts.filter((c) => c.id !== contact.id)\n        //     })\n        // )\n        //\n        // ContactsAPI.remove(contact);\n    }\n\n    createContact(contact) {\n        // ContactsAPI.create(contact).then(contact => {\n        //     this.setState(prevState => {\n        //         //concat 用于连接数组（在数组后添加对应的contact对象)\n        //         contacts : prevState.contacts.concat([contact])\n        //     })\n        // })\n    }\n\n    render() {\n        return (\n            <Switch>\n              <Route path=\"/\" exact render= {()=> (\n                  <DouyuStream\n                      // onDeleteContact={this.removeContact}\n                      // contacts={this.state.contacts}\n                  />\n              )}/>\n\n                <Route path=\"/sukiya\" render = {\n                    ()=> (<Sukiya/>)\n                }/>\n\n              {/*<Route path=\"/create\" render={ ({history}) =>(*/}\n\n                  {/*<CreateContact*/}\n                      {/*onCreateContact = {(contact) => {*/}\n                          {/*this.createContact(contact)*/}\n                          {/*//history 是router中的url变量*/}\n                          {/*history.push('/')*/}\n                      {/*}}/>*/}\n              {/*)}/>*/}\n\n              <Route exact path=\"/test\" />\n            </Switch>\n        )\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n//引入react路由器组件 BrowserRouter\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}